<%= sidebar do %>
  <%= sidebar_item 'Dashboard', dashboard_path, icon: 'tachometer-alt fas' %>

  <%= sidebar_group 'Product Drives', [
    { name: 'All Product Drives', path: product_drives_path },
    { name: 'New Product Drive', path: new_product_drive_path },
  ], icon: 'trophy fas', controller: 'product_drives' %>

  <%= sidebar_group 'Donations', [
    { name: 'All Donations', path: donations_path },
    { name: 'New Donations', path: new_donation_path },
  ], icon: 'gratipay', controller: 'donations' %>

  <%= sidebar_group 'Purchases', [
    { name: 'All Purchases', path: purchases_path },
    { name: 'New Purchaces', path: new_purchase_path },
  ], icon: 'money', controller: 'purchases' %>

  <%= sidebar_item 'Requests', requests_path, icon: 'file-text', controller: true %>
  <%= sidebar_item 'Distributions', distributions_path, icon: 'shopping-cart' %>
  <%= sidebar_item 'Pick Ups & Deliveries', schedule_distributions_path, icon: 'calendar-o' %>

  <%= sidebar_group 'Partner Agencies', [
    { name: 'All Partners', path: partners_path },
    { name: 'Partner Annoucement', path: broadcast_announcements_path },
  ], icon: 'user-friends fas', controller: 'broadcast_announcements' %>

  <%= sidebar_group 'Inventory', [
    { name: 'Items & Inventory', path: items_path, controller: true },
    { name: 'Kits', path: kits_path, controller: true },
    { name: 'Barcode Items', path: barcode_items_path, controller: true },
    { name: 'Storage Locations', path: storage_locations_path, controller: true },
    { name: 'Inventory Adjustments', path: adjustments_path, controller: true },
    { name: 'Transfers', path: transfers_path, controller: true },
  ], icon: 'pie-chart' %>

  <%= sidebar_group 'Community', [
    { name: 'Donation Sites', path: donation_sites_path, controller: true },
    { name: 'Product Drive Participants', path: product_drive_participants_path, controller: true },
    { name: 'Manufacturers', path: manufacturers_path, controller: true },
    { name: 'Vendors', path: vendors_path, controller: true },
  ], icon: 'laptop' %>

  <%=
    # First add role specific reports
    reports =
      if current_user.has_role?(Role::ORG_ADMIN, current_organization)
        [
          { name: 'Inventory Audit', path: audits_path, controller: true },
          { name: 'Annual Survey', path: reports_annual_reports_path, controller: true },
        ]
      else
        []
      end
    # Add reports for all users
    reports.concat [{
      name: 'Distributions by County',
      path: distributions_by_county_report_path(filters: { date_range: date_range_params }),
    }, {
      name: 'Itemized Donations',
      path: reports_itemized_donations_path,
    }, {
      name: 'Itemized Distributions',
      path: reports_itemized_distributions_path,
    }, {
      name: 'Purchases Summary',
      path: purchases_summary_path,
    }]
    sidebar_group 'Reporting & Auditing', reports, icon: 'tasks'
  %>

  <%= sidebar_group 'Historical Trends', [
    { name: 'Donations', path: historical_trends_donations_path },
    { name: 'Purchases', path: historical_trends_purchases_path },
    { name: 'Distributions', path: historical_trends_distributions_path },
  ], icon: 'bar-chart' %>

  <%= if current_user.has_role?(Role::ORG_ADMIN, current_organization)
    sidebar_item 'My Organization', organization_path, icon: 'home fas'
  end %>
<% end %>
